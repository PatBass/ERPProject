{# src/KGC/StatBundle/Ressources/views/Phoniste/bonuses_recap.html.twig #}

{% extends not app.request.isXmlHttpRequest() ? '::layout.html.twig' : '::emptylayout.html.twig' %}

{% block body %}
    {% embed '::widgetlayout.html.twig' %}
        {% set widget_options = {
            'titre' : 'Récapitulatif des primes',
            'refresh' : '#phoniste_bonuses'
        } %}
        {% block widget_body %}
            <div class="widget-toolbox">
                <div class="toolbar form-inline">
                    <h5>Date :</h5>
                    {{ form_widget(form.past_date) }}
                    <button type="submit" class="btn btn-primary btn-xs">
                        <i class="icon-arrow-right"></i> Appliquer
                    </button>
                </div>
            </div>
            <table class="table table-striped table-bordered text-center" style="margin-bottom: 0px;">
                <thead>
                    <tr>
                        <th rowspan="2" class="hatched">&nbsp;</th>
                        <th colspan="2">Jour</th>
                        <th colspan="2">Mois</th>
                    </tr>
                    <tr>
                        <th>RDV</th>
                        <th>Montant</th>
                        <th>RDV</th>
                        <th>Montant</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Prime Quantité</td>
                        <td>{{ day_quantity_count }}</td>
                        <td>{{ day_quantity_amount }} MAD</td>
                        <td>{{ month_quantity_count }}</td>
                        <td>{{ month_quantity_amount }} MAD</td>
                    </tr>
                    <tr>
                        <td>Prime Qualité</td>
                        <td>{{ day_quality_count }}</td>
                        <td>{{ day_quality_amount}} MAD</td>
                        <td>{{ month_quality_count }}</td>
                        <td>{{ month_quality_amount }} MAD</td>
                    </tr>
                    <tr>
                        <td>Prime Hebdo</td>
                        <td>{{ week_hebdo_count }}</td>
                        <td>{{ week_hebdo_amount | number_format }} MAD</td>
                        <td class="lattice"></td>
                        <td>{{ month_hebdo_amount | number_format }} MAD</td>
                    </tr>
                    <tr>
                        <td>Prime Challenge</td>
                        <td class="lattice"></td>
                        <td class="lattice"></td>
                        <td class="lattice"></td>
                        <td>{{ challenge_bonus | number_format }} MAD</td>
                    </tr>
                    <tr>
                        <td>Pénalité</td>
                        <td class="lattice"></td>
                        <td class="lattice"></td>
                        <td class="lattice"></td>
                        <td>{{ penalty | number_format }} MAD</td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <th colspan="4">TOTAL</th>
                        <th>{{ total_bonus | number_format(0, ',', ' ') }} MAD</th>
                    </tr>
                </tfoot>
            </table>
        {% endblock %}
    {% endembed %}
{% endblock body %}